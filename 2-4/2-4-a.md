# 第二部　モデル駆動設計の構成要素

## 第4章　ドメインを隔離する
システム全体においてドメインから生じる問題の解決を行う箇所は一部分であり、システム全体に知識が分散して発見が困難になるような事は避けたい。

ドメインの複雑な知識をドメイン層に集約し、整理する為に何をすれば良いか？

### レイヤ化アーキテクチャ
レイヤ内のどの要素も、同じレイヤの他の要素か、下にあるレイヤの要素にしか依存しない。

#### UI層
ユーザーに情報を表示して、ユーザーのコマンドを解釈する責務を負う

#### アプリケーション層
ドメインオブジェクトが問題を解決するよう仕向けたり、他システムのアプリケーション層と相互作用する。
このレイヤは薄く保たれるべき、ビジネスルールや知識は含まないべき

#### ドメイン層（モデル層）
ビジネスルールに関する責務を持つ
ビジネスの概念や状態はこのレイヤに集約する。
仕様が増えるとこの層のコードが増えていく。

#### インフラストラクチャ層
上位のレイヤを支える一般的な技術的機能を提供する。

### オンラインバンキングを例とした時の各層
口座Aから口座Bへの振替を例に分離されておらず表現力の乏しいドメイン設計を紹介している。

口座という概念にあらゆるルールを押し付けすぎている為、
元帳オブジェクトや金銭取引オブジェクト等への分離が可能性として示されている。

#### UI層
振替コントローラ
#### アプリケーション層
資金振替サービス
#### ドメイン層
口座A　口座B
#### インフラストラクチャ層
作業ユニットマネージャ
O-Rマッパ


### アーキテクチャフレームワーク
優れたフレームワークの利用は複雑な技術的な問題を解決し、開発者がモデルの表現に集中する事を手助けする一方で制約を受ける場合もある。
必要な機能だけを選択して利用する事でフレームワークの持つ欠点を回避できる。
